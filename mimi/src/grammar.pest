literal = {(!("$" | "%" | "{" | "}") ~ ANY)+}

identifier = {ASCII_ALPHANUMERIC+}
variable = {"$" ~ identifier}

color = { ^"red" | ^"black" | ^"white" }
fg_color = { color }
bg_color = { "bg_" ~ color }
attribute = _{ fg_color | bg_color }
separator = _{ "," ~ " "* }
style = { " "* ~ attribute ~ (separator ~ attribute)* ~ " "* }
styled = { "%[" ~ style ~ "]{" ~ format_string ~ "}" }

format_string = _{ (literal | variable | styled)+ }
format_string_entire = _{ SOI ~ format_string ~ EOI }
